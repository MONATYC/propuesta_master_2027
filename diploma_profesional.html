<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diploma Profesional de Trabajo con Primates - Fundaci√≥ MONA & FUdG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="calendario.css">
    <style>
      body {
        font-family: "Montserrat", sans-serif;
        background-color: #f5f5f0;
        color: #333333;
        overflow-x: hidden;
      }

      /* Estado inicial para animaci√≥n */
      h1, h2, h3, h4, h5, h6 {
        opacity: 0;
        filter: blur(4px);
        will-change: opacity, filter;
      }

      @keyframes softReveal {
        from { opacity: 0; filter: blur(4px); }
        to { opacity: 1; filter: blur(0px); }
      }

      .animate-soft-reveal {
        animation: softReveal 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards;
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const observerOptions = {
          threshold: 0.1,
          rootMargin: "0px 0px -50px 0px",
        };
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("animate-soft-reveal");
              observer.unobserve(entry.target);
            }
          });
        }, observerOptions);
        document
          .querySelectorAll("h1, h2, h3, h4, h5, h6")
          .forEach((h) => observer.observe(h));
      });
    </script>
  </head>
  <body>
    <div class="min-h-screen selection:bg-[#41a86b] selection:text-white pb-12">
      <!-- ========== HEADER ========== -->
      <header class="px-4 md:px-6 pt-12 md:pt-20 pb-8 max-w-6xl mx-auto text-center">
        <!-- NAVIGATION -->
        <nav class="mb-12 flex flex-wrap justify-center gap-4 md:gap-8 text-[10px] md:text-xs font-black uppercase tracking-[0.2em] text-gray-400">
            <a href="index.html" class="hover:text-[#41a86b] transition-colors">Inicio</a>
            <a href="fundamentos.html" class="hover:text-[#41a86b] transition-colors">Fundamentos</a>
            <a href="diploma_profesional.html" class="text-[#41a86b] border-b-2 border-[#41a86b] pb-1">Diploma Profesional</a>
            <a href="diploma_investigacion.html" class="hover:text-[#41a86b] transition-colors">Diploma Investigaci√≥n</a>
            <a href="master.html" class="hover:text-[#41a86b] transition-colors">M√°ster</a>
        </nav>

        <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-black text-[#41a86b] leading-none mb-4 tracking-tighter uppercase">
          Diploma profesional de trabajo con primates
        </h1>
        <p class="text-xl md:text-2xl text-gray-500 font-bold uppercase tracking-tight mb-8">
          Diploma de especializaci√≥n (postgrado) | Fundaci√≥ MONA & FUdG
        </p>
        
        <!-- ORGANIZACIONES PROMOTORAS -->
        <div class="flex flex-col items-center gap-3 md:gap-4 mb-8">
          <div class="flex flex-col sm:flex-row items-center gap-4 sm:gap-6 md:gap-10 bg-white/60 p-4 md:p-5 rounded-2xl md:rounded-3xl backdrop-blur-md border border-white shadow-sm ring-1 ring-black/5">
            <img
              src="https://fundaciomona.org/wp-content/uploads/2023/09/logo.png"
              alt="Logo MONA"
              class="h-10 sm:h-12 w-auto opacity-90 transition-all duration-300 pointer-events-none"
            />
            <div class="w-full sm:w-px h-px sm:h-8 bg-gray-200"></div>
            <img
              src="https://www.fundacioudg.org/image/fundacio_UdG_25_es.png"
              alt="Logo FUdG"
              class="h-10 sm:h-12 w-auto opacity-90 transition-all duration-300 pointer-events-none"
            />
          </div>
          <p class="text-[10px] font-extrabold text-[#41a86b] uppercase tracking-widest leading-tight">Fundaci√≥ MONA & Fundaci√≥n de la Universidad de Girona</p>
        </div>

        <div class="flex gap-4 justify-center flex-wrap">
          <div class="info-pill" style="border-left: 4px solid var(--theory-color);">
            <span>üé•</span> Clases online en directo (se grabar√°n para consulta previa a las pr√°cticas).
          </div>
          <div class="info-pill" style="border-left: 4px solid var(--primary);">
            <span>üéì</span> Carga Total: 30 Cr√©ditos ECTS.
          </div>
        </div>
      </header>

      <!-- ========== CALENDARIO ANUAL ========== -->
      <section class="max-w-6xl mx-auto px-4 md:px-6 mb-12">
        <div class="bg-white p-6 md:p-8 lg:p-10 rounded-[32px] md:rounded-[40px] shadow-lg border border-gray-100">
          <h2 class="text-xl md:text-2xl font-extrabold text-[#41a86b] mb-8 uppercase tracking-tighter flex items-center gap-3">
            <span>üìÖ</span> Cronograma de Referencia 2026
          </h2>
          <div class="calendar-wrapper" id="calendarContainer"></div>
        </div>
      </section>

      <!-- ========== RESUMEN Y CARGA ACAD√âMICA ========== -->
      <section class="max-w-6xl mx-auto px-4 md:px-6 mb-12">
        <div class="summary-wrapper">
          <!-- Capacidad -->
          <div class="summary-box">
            <div class="summary-title">üë• Capacidad M√°xima de la Formaci√≥n</div>
            <div id="capacityStats"></div>
            <div class="alert-box" style="background: #fffdf5; border-left: 4px solid #f39c12; color: #a67c00;">
              <strong>‚ö†Ô∏è Limitaci√≥n del Programa:</strong> El aforo total anual est√° limitado a 18 personas por la rotaci√≥n obligatoria en el √°rea de Cuidados (m√°x. 2 alumnos simult√°neos).
            </div>
          </div>

          <!-- ECTS -->
          <div class="summary-box" style="border-top-color: #cfbaf0;">
            <div class="summary-title">üìú Distribuci√≥n de Carga Acad√©mica</div>
            <table class="ects-table">
              <thead>
                <tr>
                  <th>Concepto</th>
                  <th>Horas</th>
                  <th>ECTS</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Teor√≠a Online (T1)</td>
                  <td>88h</td>
                  <td>11</td>
                </tr>
                <tr>
                  <td>Teor√≠a Profesional (TP)</td>
                  <td>24h</td>
                  <td>3</td>
                </tr>
                <tr>
                  <td>Pr√°cticas de Cuidados</td>
                  <td>200h</td>
                  <td>9</td>
                </tr>
                <tr>
                  <td>Observaci√≥n y Edu. Amb.</td>
                  <td>115h</td>
                  <td>5</td>
                </tr>
                <tr>
                  <td>Proyecto Final</td>
                  <td>50h</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td><strong>TOTAL PROGRAMA</strong></td>
                  <td><strong>477h</strong></td>
                  <td><strong>30</strong></td>
                </tr>
              </tbody>
            </table>
            <div class="alert-box" style="background: #f0fdf4; border-left: 4px solid #41a86b; color: #166534;">
              <strong>üìç Formato H√≠brido:</strong> Esta titulaci√≥n combina la teor√≠a digital con una estancia presencial intensiva en Fundaci√≥ MONA.
            </div>
          </div>
        </div>
      </section>

      <!-- ========== DESGLOSE DE BLOQUES ========== -->
      <section class="max-w-6xl mx-auto px-4 md:px-6 mb-12 text-center md:text-left">
        <h2 class="text-2xl md:text-3xl font-black text-[#41a86b] mb-10 uppercase tracking-tighter flex items-center justify-center md:justify-start gap-4">
          <span>üì¶</span> Desglose de Bloques por Fecha
        </h2>
        <div class="blocks-container" id="blocksContainer"></div>
      </section>

      <!-- ========== PROCESO DE RESERVA ========== -->
      <section class="max-w-6xl mx-auto px-4 md:px-6 mb-20">
          <div class="summary-box" style="border-top-color: #64748b;">
            <div class="summary-title">üìù Proceso de Reserva y Asignaci√≥n</div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
              <div class="bg-gray-50 p-6 rounded-2xl border border-gray-100">
                <h4 class="text-[#41a86b] font-black uppercase text-sm mb-4 flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-[#41a86b]"></span> Orden de Elecci√≥n
                </h4>
                <p class="text-gray-600 font-semibold leading-relaxed text-sm">
                  La asignaci√≥n de los bloques de pr√°cticas se realizar√° estrictamente por <strong>orden de solicitud</strong>. Los alumnos que completen antes su inscripci√≥n tendr√°n prioridad para elegir sus fechas preferidas entre los bloques disponibles.
                </p>
              </div>
              <div class="bg-gray-50 p-6 rounded-2xl border border-gray-100">
                <h4 class="text-gray-500 font-black uppercase text-sm mb-4 flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-gray-400"></span> Cambios y Cancelaciones
                </h4>
                <p class="text-gray-600 font-semibold leading-relaxed text-sm">
                  Se definir√° una normativa espec√≠fica que regular√° las posibilidades de cambio de fechas o cancelaci√≥n de la plaza, para asegurar la viabilidad de los grupos y la rotaci√≥n de aforos.
                </p>
              </div>
            </div>
          </div>
      </section>

      <!-- ========== FOOTER ========== -->
      <footer class="max-w-4xl mx-auto px-6 text-center py-12 opacity-40">
        <p class="text-gray-600 text-[10px] font-black uppercase tracking-[0.2em]">
          ¬© 2026 Fundaci√≥ MONA & Fundaci√≥n de la Universidad de Girona ‚Äî Primatolog√≠a y Bienestar Animal
        </p>
      </footer>
    </div>

    <!-- Modal -->
    <div class="modal" id="editModal">
      <div class="modal-content">
        <h3 class="text-xl font-bold mb-6 text-[#41a86b]">‚öôÔ∏è Ajustar Calendario</h3>
        <div style="margin-bottom: 20px;">
          <label class="block font-bold text-gray-700 mb-2">Inicio Bloque 1 (Lunes)</label>
          <input type="date" id="editStartDate" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-[#41a86b] focus:outline-none transition-colors">
        </div>
        <div class="flex gap-3">
          <button class="flex-1 py-3 px-4 bg-gray-100 text-gray-600 rounded-xl font-bold hover:bg-gray-200 transition-colors" onclick="closeModal()">Cancelar</button>
          <button class="flex-1 py-3 px-4 bg-[#41a86b] text-white rounded-xl font-bold hover:bg-[#328554] transition-colors" onclick="saveEdit()">Recalcular</button>
        </div>
      </div>
    </div>

    <script>
      const months = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
      const dayNames = ["L", "M", "X", "J", "V", "S", "D"];
      
      const theoryPhase = {
        start: new Date(2026, 1, 2),
        end: new Date(2026, 2, 21)
      };

      let practicalStartBase = new Date(2026, 2, 31);
      let practicalBlocks = [];

      function calculateBlocks() {
        practicalBlocks = [];
        const endYear = new Date(2026, 11, 31);
        
        // Bloque 1: Especial (empieza martes 31 Mar para evitar Semana Santa 2026)
        let b1 = {
          index: 1,
          start: new Date(2026, 2, 31),
          end: new Date(2026, 4, 3),
          weeks: []
        };
        let p1 = new Date(b1.start);
        for (let i = 0; i < 5; i++) {
          let ws = new Date(p1);
          let we = new Date(p1);
          we.setDate(we.getDate() + (i === 4 ? 5 : 6));
          b1.weeks.push({ start: ws, end: we });
          p1.setDate(p1.getDate() + 7);
        }
        practicalBlocks.push(b1);

        // Bloques siguientes: Empiezan en lunes
        let current = new Date(2026, 4, 4);
        let idx = 2;

        while (current <= endYear) {
          let block = {
            index: idx++,
            start: new Date(current),
            end: new Date(current),
            weeks: []
          };
          block.end.setDate(block.end.getDate() + 34);

          let pointer = new Date(block.start);
          for (let i = 0; i < 5; i++) {
            let ws = new Date(pointer);
            let we = new Date(pointer);
            we.setDate(we.getDate() + 6);
            block.weeks.push({ start: ws, end: we });
            pointer.setDate(pointer.getDate() + 7);
          }
          practicalBlocks.push(block);
          current.setDate(current.getDate() + 35);
        }
      }

      function getElementTypeAtDate(date) {
        const d = new Date(date); d.setHours(0,0,0,0);
        const tS = new Date(theoryPhase.start); tS.setHours(0,0,0,0);
        const tE = new Date(theoryPhase.end); tE.setHours(0,0,0,0);
        if (d >= tS && d <= tE) return { type: 'theory' };

        for (let b of practicalBlocks) {
          const bS = new Date(b.start); bS.setHours(0,0,0,0);
          const bE = new Date(b.end); bE.setHours(0,0,0,0);
          if (d >= bS && d <= bE) return { type: 'practical', index: b.index };
        }
        return null;
      }

      function renderAnnualCalendar() {
        const container = document.getElementById('calendarContainer');
        container.innerHTML = '';
        for (let m = 0; m < 12; m++) {
          const mDiv = document.createElement('div');
          mDiv.className = 'month-container';
          mDiv.innerHTML = `<div class="month-header">${months[m]}</div>`;
          const grid = document.createElement('div');
          grid.className = 'day-grid';
          dayNames.forEach(d => grid.innerHTML += `<div class="day-name">${d}</div>`);

          const first = new Date(2026, m, 1);
          let offset = first.getDay() - 1; if (offset === -1) offset = 6;
          for (let i = 0; i < offset; i++) grid.innerHTML += `<div class="day-number empty"></div>`;

          const days = new Date(2026, m + 1, 0).getDate();
          for (let d = 1; d <= days; d++) {
            const date = new Date(2026, m, d);
            const dayDiv = document.createElement('div');
            dayDiv.className = 'day-number';
            dayDiv.textContent = d;
            const match = getElementTypeAtDate(date);
            if (match) {
              if (match.type === 'theory') dayDiv.classList.add('t1');
              else if (match.type === 'practical') {
                const colorIdx = (match.index - 1) % 10 + 1;
                dayDiv.classList.add(`b${colorIdx}`);
              }
            }
            grid.appendChild(dayDiv);
          }
          mDiv.appendChild(grid);
          container.appendChild(mDiv);
        }
      }

      function renderCards() {
        const container = document.getElementById('blocksContainer');
        container.innerHTML = '';

        // Fase Teor√≠a
        const tCard = document.createElement('div');
        tCard.className = 'block-card theory';
        tCard.innerHTML = `
          <span class="block-tag" style="background:#ffd166; color: #333;">Formaci√≥n Online</span>
          <span class="block-dates">Teor√≠a Online (T1)</span>
          <p style="font-weight:700; color:#333;">${formatRange(theoryPhase.start, theoryPhase.end)}</p>
          <div class="capacity-section" style="background:linear-gradient(135deg, #fffdf5 0%, #fff 100%)">
            <span class="capacity-title">Horas: 88h | Cr√©ditos: 11 ECTS</span>
            <p style="font-size:0.85rem; font-weight: 600; color: #64748b;">Clases online en directo para la base te√≥rica profesional.</p>
          </div>
        `;
        container.appendChild(tCard);

        practicalBlocks.forEach(b => {
          const card = document.createElement('div');
          const colorIdx = (b.index - 1) % 10 + 1;
          card.className = `block-card b${colorIdx}`;
          card.innerHTML = `
            <span class="block-tag">Inmersi√≥n Presencial</span>
            <span class="block-dates">Bloque de Pr√°cticas ${b.index}</span>
            <p style="font-weight:700; color:#333; margin-bottom:14px;">${formatRange(b.start, b.end)}</p>
            
            <div class="capacity-section">
              <span class="capacity-title">Teor√≠a Profesional (TP) + Pr√°cticas (PP)</span>
              <div class="capacity-item"><span>TP: Manejo y Gesti√≥n (24h)</span><span class="cap-tag" style="background:#ffd166; color:#333">3 ECTS</span></div>
              <div class="capacity-item"><span>PP: Cuidados (200h)</span><span class="cap-tag" style="background:#e67e22">9 ECTS</span></div>
              <div class="capacity-item"><span>PP: Obs/Edu (115h)</span><span class="cap-tag" style="background:#4a90e2">5 ECTS</span></div>
            </div>

            <div class="week-list">
              ${b.weeks.map((w, i) => `
                <div class="week-item">
                  <span class="font-bold text-gray-400">S${i + 1}</span>
                  <span class="text-gray-600">${formatShort(w.start)} ‚Äî ${formatShort(w.end)}</span>
                </div>
              `).join('')}
            </div>
          `;
          container.appendChild(card);
        });
      }

      function renderStats() {
        const container = document.getElementById('capacityStats');
        const num = practicalBlocks.length;
        const totalCapacity = num * 2;
        
        container.innerHTML = `
          <div style="padding: 20px 0;">
            <div style="font-size: 5rem; font-weight: 900; color: var(--mona-green); line-height: 1; letter-spacing: -4px;">${totalCapacity}</div>
            <div style="font-size: 1.2rem; font-weight: 800; color: var(--mona-dark); text-transform: uppercase;">Cupos M√°ximos 2026</div>
          </div>
        `;
      }

      function formatShort(d) { return d.toLocaleDateString('es-ES', { day: '2-digit', month: 'short' }); }
      function formatRange(s, e) { return `${s.getDate()} de ${months[s.getMonth()]} al ${e.getDate()} de ${months[e.getMonth()]}`; }

      function updateApp() {
        calculateBlocks();
        renderAnnualCalendar();
        renderCards();
        renderStats();
      }
      updateApp();
    </script>
  </body>
</html>
